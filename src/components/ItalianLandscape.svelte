<script>
  export let width;
  export let height;
  export let curentStep;
  import { scaleLinear } from "d3";
  import Florence from "./Florence.svelte";
  import ItalianField from "./ItalianField.svelte";

  $: xItalianScale = scaleLinear()
    .domain([0, 1])
    .range([-100, width / 4]);

  $: yItalianScale = scaleLinear()
    .domain([0, 1])
    .range([height * 1.2, 0]);
</script>

<div class="step-content">
  <div class="step-count">
    <svg>
      <line
        x1={width / 4 - 60}
        x2={width / 4 + 60}
        y1={50}
        y2={50}
        stroke="white"
        stroke-width="4"
        opacity="0.5"
      ></line>
      <text
        x={width / 4}
        y={100}
        fill="white"
        text-anchor="middle"
        font-size="38"
        opacity="0.5">START</text
      >
    </svg>
  </div>
  <div class="landscape">
    {#if curentStep === undefined || curentStep === 0}
      <svg>
        <defs>
          <linearGradient id="mountain" x1="0%" x2="100%" y1="0%" y2="100%">
            <stop offset="0%" stop-color="#A07A7B " />
            <stop offset="50%" stop-color="#5D695F" />
          </linearGradient>
        </defs>
        <!-- Mountains -->
        <g
          transform="translate({xItalianScale(0)},{yItalianScale(
            1
          )}) scale(0.6)"
        >
          <path
            d="M161.459 0.0665568C131.197 2.0056 98.7903 30.768 82.1103 46.9267C65.4303 63.0854 61.3794 75.366 61.3794 75.366C209.434 74.8274 505.783 74.0733 506.736 75.366C507.927 76.9819 496.013 32.3839 479.095 27.5363C462.176 22.6887 428.101 51.128 407.371 27.5363C386.64 3.94467 352.327 6.85324 329.451 4.59102C306.576 2.32881 267.02 46.9267 243.668 43.0486C220.316 39.1706 191.722 -1.87248 161.459 0.0665568Z"
            fill="url(#mountain)"
          />
          <path
            d="M204.856 56.6774C174.591 58.2526 125.976 59.3027 109.294 72.4295C92.6128 85.5564 88.5615 95.5327 88.5615 95.5327C236.63 95.0952 533.007 94.4826 533.96 95.5327C535.152 96.8454 509.414 68.2289 492.494 64.2909C475.574 60.3528 424.815 68.175 404.082 49.0099C383.349 29.8448 361.425 50.8475 338.547 49.0098C315.669 47.172 286.119 41.1878 262.765 38.0374C239.411 34.8869 235.121 55.1022 204.856 56.6774Z"
            fill="url(#mountain)"
          />
          <path
            d="M117.023 75.4558C81.6373 76.8311 43.7442 97.2324 24.2404 108.694C4.73664 120.155 0 128.866 0 128.866C173.119 128.484 519.637 127.949 520.751 128.866C522.144 130.012 508.213 98.3786 488.431 94.9402C468.648 91.5017 428.805 111.674 404.564 94.9402C380.324 78.2065 340.202 80.2696 313.454 78.665C286.706 77.0604 241.256 97.6911 213.951 94.9403C186.645 92.1896 152.408 74.0804 117.023 75.4558Z"
            fill="url(#mountain)"
          />
        </g>
        <!-- Mountains -->
        <g
          transform="translate({xItalianScale(0)},{yItalianScale(
            0.95
          )}) scale(0.6)"
        >
          <path
            d="M161.459 0.0665568C131.197 2.0056 98.7903 30.768 82.1103 46.9267C65.4303 63.0854 61.3794 75.366 61.3794 75.366C209.434 74.8274 505.783 74.0733 506.736 75.366C507.927 76.9819 496.013 32.3839 479.095 27.5363C462.176 22.6887 428.101 51.128 407.371 27.5363C386.64 3.94467 352.327 6.85324 329.451 4.59102C306.576 2.32881 267.02 46.9267 243.668 43.0486C220.316 39.1706 191.722 -1.87248 161.459 0.0665568Z"
            fill="url(#mountain)"
          />
          <path
            d="M204.856 56.6774C174.591 58.2526 125.976 59.3027 109.294 72.4295C92.6128 85.5564 88.5615 95.5327 88.5615 95.5327C236.63 95.0952 533.007 94.4826 533.96 95.5327C535.152 96.8454 509.414 68.2289 492.494 64.2909C475.574 60.3528 424.815 68.175 404.082 49.0099C383.349 29.8448 361.425 50.8475 338.547 49.0098C315.669 47.172 286.119 41.1878 262.765 38.0374C239.411 34.8869 235.121 55.1022 204.856 56.6774Z"
            fill="url(#mountain)"
          />
          <path
            d="M117.023 75.4558C81.6373 76.8311 43.7442 97.2324 24.2404 108.694C4.73664 120.155 0 128.866 0 128.866C173.119 128.484 519.637 127.949 520.751 128.866C522.144 130.012 508.213 98.3786 488.431 94.9402C468.648 91.5017 428.805 111.674 404.564 94.9402C380.324 78.2065 340.202 80.2696 313.454 78.665C286.706 77.0604 241.256 97.6911 213.951 94.9403C186.645 92.1896 152.408 74.0804 117.023 75.4558Z"
            fill="url(#mountain)"
          />
        </g>
        <!-- Florence -->
        <g
          transform="translate({xItalianScale(0.3)},{yItalianScale(
            0.9
          )}) scale(0.6)"
        >
          <Florence />
        </g>
        <!-- Mountains -->
        <!-- Mountains -->
        <g
          transform="translate({xItalianScale(0)},{yItalianScale(
            0.64
          )}) scale(0.6)"
        >
          <path
            d="M161.459 0.0665568C131.197 2.0056 98.7903 30.768 82.1103 46.9267C65.4303 63.0854 61.3794 75.366 61.3794 75.366C209.434 74.8274 505.783 74.0733 506.736 75.366C507.927 76.9819 496.013 32.3839 479.095 27.5363C462.176 22.6887 428.101 51.128 407.371 27.5363C386.64 3.94467 352.327 6.85324 329.451 4.59102C306.576 2.32881 267.02 46.9267 243.668 43.0486C220.316 39.1706 191.722 -1.87248 161.459 0.0665568Z"
            fill="url(#mountain)"
          />
          <path
            d="M204.856 56.6774C174.591 58.2526 125.976 59.3027 109.294 72.4295C92.6128 85.5564 88.5615 95.5327 88.5615 95.5327C236.63 95.0952 533.007 94.4826 533.96 95.5327C535.152 96.8454 509.414 68.2289 492.494 64.2909C475.574 60.3528 424.815 68.175 404.082 49.0099C383.349 29.8448 361.425 50.8475 338.547 49.0098C315.669 47.172 286.119 41.1878 262.765 38.0374C239.411 34.8869 235.121 55.1022 204.856 56.6774Z"
            fill="url(#mountain)"
          />
          <path
            d="M117.023 75.4558C81.6373 76.8311 43.7442 97.2324 24.2404 108.694C4.73664 120.155 0 128.866 0 128.866C173.119 128.484 519.637 127.949 520.751 128.866C522.144 130.012 508.213 98.3786 488.431 94.9402C468.648 91.5017 428.805 111.674 404.564 94.9402C380.324 78.2065 340.202 80.2696 313.454 78.665C286.706 77.0604 241.256 97.6911 213.951 94.9403C186.645 92.1896 152.408 74.0804 117.023 75.4558Z"
            fill="url(#mountain)"
          />
        </g>
        <g
          transform="translate({xItalianScale(0.1)},{yItalianScale(
            0.6
          )}) scale(0.6)"
        >
          <path
            d="M161.459 0.0665568C131.197 2.0056 98.7903 30.768 82.1103 46.9267C65.4303 63.0854 61.3794 75.366 61.3794 75.366C209.434 74.8274 505.783 74.0733 506.736 75.366C507.927 76.9819 496.013 32.3839 479.095 27.5363C462.176 22.6887 428.101 51.128 407.371 27.5363C386.64 3.94467 352.327 6.85324 329.451 4.59102C306.576 2.32881 267.02 46.9267 243.668 43.0486C220.316 39.1706 191.722 -1.87248 161.459 0.0665568Z"
            fill="url(#mountain)"
          />
          <path
            d="M204.856 56.6774C174.591 58.2526 125.976 59.3027 109.294 72.4295C92.6128 85.5564 88.5615 95.5327 88.5615 95.5327C236.63 95.0952 533.007 94.4826 533.96 95.5327C535.152 96.8454 509.414 68.2289 492.494 64.2909C475.574 60.3528 424.815 68.175 404.082 49.0099C383.349 29.8448 361.425 50.8475 338.547 49.0098C315.669 47.172 286.119 41.1878 262.765 38.0374C239.411 34.8869 235.121 55.1022 204.856 56.6774Z"
            fill="url(#mountain)"
          />
          <path
            d="M117.023 75.4558C81.6373 76.8311 43.7442 97.2324 24.2404 108.694C4.73664 120.155 0 128.866 0 128.866C173.119 128.484 519.637 127.949 520.751 128.866C522.144 130.012 508.213 98.3786 488.431 94.9402C468.648 91.5017 428.805 111.674 404.564 94.9402C380.324 78.2065 340.202 80.2696 313.454 78.665C286.706 77.0604 241.256 97.6911 213.951 94.9403C186.645 92.1896 152.408 74.0804 117.023 75.4558Z"
            fill="url(#mountain)"
          />
        </g>
        <!-- Italian field -->
        <g
          transform="translate({xItalianScale(0.3)},{yItalianScale(
            0.55
          )}) scale(0.8)"
        >
          <ItalianField />
        </g>
      </svg>
    {/if}
  </div>
</div>

<style>
  .step-content {
    width: 100%;
    height: 100%;
    display: flex;
    place-items: center;
    justify-content: end;
  }

  .step-count {
    width: 50%;
  }

  .step-count svg {
    width: 100%;
    max-width: 50vw;
  }

  .landscape {
    width: 25%;
    height: 100%;
    background: linear-gradient(#615968 50%, #609978);
  }
  .step-count {
    width: 50%;
    height: 100%;
    font-family: "Caveat Brush", cursive;
  }

  .landscape svg {
    width: 100%;
    height: 100%;
  }

  /* path {
      -webkit-filter: drop-shadow(3px -3px 4px rgba(0, 0, 0, 0.2));
      filter: drop-shadow(3px -3px 4px rgba(0, 0, 0, 0.2));
    } */
</style>
